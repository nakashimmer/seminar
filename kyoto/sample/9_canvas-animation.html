<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>canvasアニメ−ション</title>
	<style>
		#mycanvas{background-color:skyblue;}
	</style>
</head>

<body>
	<canvas id="canvas" width="600" height="600"></canvas>
	<script>
		var canvas = document.getElementById("canvas");
		var ctx = canvas.getContext("2d");

		//初期設定
		var x = 300;
		var dir = 1;
		var i=0;

		//アニメーション
		var mytimer = setInterval(anime, 50);

		function anime(){
			if(i==60*60*20){clearInterval(mytimer);}

			//1.画面を消去
			ctx.clearRect(0, 0, 600, 600);

			//2.図形を描画
			ctx.beginPath();
			ctx.arc(x, 300, 100, 0, 2*Math.PI, false);
			ctx.closePath();
			ctx.fillStyle = "blue";
			ctx.fill();

			ctx.beginPath();
			ctx.fillStyle = "blue";
			ctx.strokeRect(300-100, 300-100, 200, 200);

			//3.次の状態を計算しておく
			x += dir;
			if(x<100 || 500 < x){dir *= -1;};
		}
	</script>
</body>
</html>